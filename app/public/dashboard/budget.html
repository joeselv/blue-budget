<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlueBudget</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,200,0..1,0" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css">\
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <img src="../../resources/blueBudgetLogo.svg" alt="BlueBudget Logo" class="logo-img">
            BlueBudget
        </div>

        <a href="budget.html" id="budget" class="menu-item selected">
            <span class="material-symbols-rounded">savings</span>
            <span>Budget</span>
        </a>
        <a href="transactions.html" id="transactions" class="menu-item">
            <span class="material-symbols-rounded">receipt_long</span>
            <span>Transactions</span>
        </a>
        <a href="accounts.html" id="accounts" class="menu-item">
            <span class="material-symbols-rounded">person</span>
            <span>Accounts</span>
        </a>
        <a href="settings.html" id="settings" class="menu-item">
            <span class="material-symbols-rounded">settings</span>
            <span>Settings</span>
        </a>
    </div>

    <div class="main-container">
        <div class="header">
            <p class="page-title">Budget</p>
            <button id="logout-btn" class="logout-btn">Log Out</button>
        </div>

        <div class="content">
            <div class="main-content">
                <div class="budget-section">
                    <div class="budget-card">
                        <div class="icon">
                            <img src="../../resources/moneybagicon.svg" alt="Money Bag Icon">
                        </div>
                        <div class="title">Ready to Assign</div>
                        <div class="amount">$6,000</div>
                    </div>
        
                    <div class="budget-table-container">
                        <table class="budget-table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Progress</th>
                                    <th>Assigned</th>
                                    <th>Activity</th>
                                    <th>Available</th>
                                    <th>Goal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <span class="material-symbols-rounded">home</span> Home
                                    </td>
                                    <td>$1000</td>
                                    <td>$0</td>
                                    <td class="activity neutral">$1,000</td>
                                    <td>$2096</td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="material-symbols-rounded">apparel</span> Clothing
                                    </td>
                                    <td>$200</td>
                                    <td>$175</td>
                                    <td class="activity neutral">$100</td>
                                    <td>$300</td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="material-symbols-rounded">beach_access</span> Rainy day
                                    </td>
                                    <td>$5000</td>
                                    <td>$4850</td>
                                    <td class="activity neutral">$150</td>
                                    <td>$5000</td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="material-symbols-rounded">smartphone</span> Phone
                                    </td>
                                    <td>$0</td>
                                    <td>$0</td>
                                    <td class="activity neutral">$0</td>
                                    <td>$45</td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="material-symbols-rounded">captive_portal</span> Internet
                                    </td>
                                    <td>$120</td>
                                    <td>-$40</td>
                                    <td class="activity negative">-$160</td>
                                    <td>$80</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const menuItems = document.querySelectorAll('.menu-item');
            
            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    menuItems.forEach(i => i.classList.remove('selected'));
                    item.classList.add('selected');
        
                    const pageTitle = document.querySelector('.page-title');
                    const pageName = item.querySelector('span:last-child').textContent;
                    pageTitle.textContent = pageName;
                });
            });

            document.addEventListener("DOMContentLoaded", function() {
            const budgetRows = document.querySelectorAll('.budget-table tbody tr');

            budgetRows.forEach(row => {
                const assigned = parseFloat(row.children[1].textContent.replace('$', '').trim());
                const activity = parseFloat(row.children[2].textContent.replace('$', '').trim());
                const goal = parseFloat(row.children[4].textContent.replace('$', '').trim());

                const available = assigned - activity;

                const availableCell = row.querySelector('td.activity');
                availableCell.textContent = `$${available.toFixed(2)}`;

                if (available < 0) {
                    availableCell.classList.add('negative');
                    availableCell.classList.remove('neutral');
                } else {
                    availableCell.classList.add('neutral');
                    availableCell.classList.remove('negative');
                }

                const progressCell = document.createElement('td');
                
                const progressContainer = document.createElement('div');
                progressContainer.classList.add('progress-container');
                
                const progressBar = document.createElement('div');
                progressBar.classList.add('progress-bar');
                
                const progressPercent = (assigned / goal) * 100;
                progressBar.style.width = `${Math.min(Math.max(progressPercent, 0), 100)}%`;

                if (assigned >= goal) {
                    progressBar.style.backgroundColor = 'green';
                } else if (available > 0) {
                    progressBar.style.backgroundColor = '#fbc02d';
                } else {
                    progressBar.style.backgroundColor = 'red';
                }

                progressContainer.appendChild(progressBar);
                progressCell.appendChild(progressContainer);

                row.insertBefore(progressCell, row.children[1]);
            });
        });
        </script>
</body>
</html>
